/************************************************************************************
 * app.c																			*
 *																					*
 *  Created on: 02/01/2018															*
 *      Author: Evandro Teixeira													*
 ************************************************************************************/
#include "app.h"
/************************************************************************************
 * 												    								*
 ************************************************************************************/
id_Task id_task_led_red;
id_Task id_task_led_blue;
id_Task id_task_led_green;
id_Task id_task_sw2;
id_Task id_task_sw3;
extern uint32_t SystemCoreClock ;
/************************************************************************************
 * 												    								*
 ************************************************************************************/
void app_init(void)
{
	UART_ConfigType sConfig;

	SystemCoreClockUpdate();

	sConfig.u32SysClkHz = SystemCoreClock;
    sConfig.u32Baudrate = 9600;
	UART_Init(UART1,&sConfig);

	GPIO_PinInit(BUTTOM_SW2);
	GPIO_PinInit(BUTTOM_SW3);

	RED_Init();
	BLUE_Init();
	GREEN_Init();

	GREEN_Set();
}
/************************************************************************************
 * 												    								*
 ************************************************************************************/
void app_task_led_red(void)
{
	RED_Toggle();
	kernel_task_blocks(id_task_led_red);
}
/************************************************************************************
 * 												    								*
 ************************************************************************************/
void app_task_led_blue(void)
{
	BLUE_Toggle();
	kernel_task_blocks(id_task_led_blue);
}
/************************************************************************************
 * 												    								*
 ************************************************************************************/
void app_task_led_green(void)
{
	GREEN_Toggle();
}
/************************************************************************************
 * 												    								*
 ************************************************************************************/
void app_task_sw2(void)
{
	if( (GPIO_Read(BUTTOM) & READ_BUTTOM_SW2) == 0)
		kernel_task_unlock(id_task_led_red);
	else
		RED_Set();

	//kernel_task_delay(100);
}
/************************************************************************************
 * 												    								*
 ************************************************************************************/
void app_task_sw3(void)
{
	if( (GPIO_Read(BUTTOM) & READ_BUTTOM_SW3) == 0)
		kernel_task_unlock(id_task_led_blue);
	else
		BLUE_Set();

	//kernel_task_delay(100);
}
/************************************************************************************
 * 												    								*
 ************************************************************************************/
